require 'socket'
require './bidirectional_server.rb'

class CentralServer < BidirectionalServer

  #register peer server
  def register_peer
  end

  def register_backup
  end

  def update_page
  end

  def browse_page
  end

  def pong(host, port)
    send_message("PONG", host, port) 
  end
  
  # TODO: this method checks request message, returns request type
  def request_type(request)
  
  end

  # override the accept_handler here
  def accept_handler(client)
    while line = client.gets
      if(request_type(line.chop)==0)
        pong(client.peeraddr[2], 3001)
      end
     
    end
    super
  end


  private :request_type, :register_peer, :register_backup, :update_page, :browse_page

end

